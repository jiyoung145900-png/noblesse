<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>⚜️ NOBLESSE 프로필 카드 생성기</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
/* 폰트 및 전체 배경 */
body {
    font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
    margin: 0;
    /* 노블레스 테마: 짙은 배경 */
    background: #1A1A2E; 
    color: #F0F0F0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 30px;
}

/* ⚜️ 메인 컨테이너 */
#app-container {
    display: flex;
    gap: 50px;
    background: #232742; /* 살짝 밝은 네이비 */
    padding: 40px;
    border-radius: 18px;
    box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
    /* 노블레스 포인트 색상 (골드/브론즈) */
    --noblesse-gold: #DFAA6D; 
    --noblesse-accent-bg: #40466F; /* 강조 배경색 */
}

/* ⬅️ 입력 폼 영역 */
#input-form {
    width: 400px;
    padding: 20px;
}

#input-form h2 {
    color: var(--noblesse-gold);
    text-align: center;
    font-size: 28px;
    margin-bottom: 30px;
    letter-spacing: 1px;
}

.input-group {
    margin-bottom: 20px;
}

.input-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 8px;
    color: #C0C0C0;
    font-size: 15px;
}

.input-group input[type="text"], 
.input-group select, 
.input-group textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid #444;
    border-radius: 6px;
    background: #33334F;
    color: #FFF;
    font-size: 16px;
    box-sizing: border-box;
    transition: border-color 0.3s;
}
.input-group input[type="file"] {
    border: none;
    padding: 0;
}
.input-group textarea {
    resize: vertical;
}

.input-group input:focus, 
.input-group select:focus, 
.input-group textarea:focus {
    border-color: var(--noblesse-gold);
    outline: none;
    box-shadow: 0 0 5px rgba(223, 170, 109, 0.5);
}

/* 버튼 스타일 */
#generate-button {
    width: 100%;
    padding: 15px;
    margin-top: 20px;
    background: var(--noblesse-gold);
    color: #1A1A2E;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.1s;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
}

#generate-button:hover {
    background: #E8BF92;
}

/* ➡️ 프로필 카드 출력부 (핵심) */
#profile-card-container {
    width: 400px; /* 고정 너비 */
    min-height: 600px;
    background: #F8F8F8; /* 밝은 카드 배경 (데이지 스타일 유지) */
    border: 3px solid var(--noblesse-gold);
    border-radius: 10px;
    box-shadow: 0 0 25px rgba(223, 170, 109, 0.4);
    overflow: hidden;
    color: #333;
}

/* 카드 상단 로고 영역 */
#card-header {
    background: var(--noblesse-accent-bg); /* 로고 배경색 */
    padding: 15px 0;
    text-align: center;
    border-bottom: 2px solid var(--noblesse-gold);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

#noblesse-logo {
    width: 40px; 
    height: 40px;
    /* 임시 이미지 스타일 (실제 파일로 교체 시 이 CSS는 불필요) */
    background: url('noblesse_logo.png') center/cover no-repeat;
    display: block;
}
#card-title {
    font-size: 22px;
    color: #FFF;
    font-weight: 600;
}

/* 프로필 사진 자리 */
#profile-photo {
    width: 100%;
    height: 350px; 
    background: #CCC;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #777;
    font-style: italic;
    overflow: hidden;
}

#profile-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* 카드 본문 */
#card-body {
    padding: 20px;
}

#output-name-age {
    font-size: 26px;
    color: var(--noblesse-gold);
    font-weight: 800;
    margin: 0 0 10px 0;
}

#card-stats {
    display: flex;
    flex-wrap: wrap;
    font-size: 15px;
    color: #666;
    margin-bottom: 15px;
}

.stat-item {
    margin-right: 15px;
    margin-bottom: 5px;
}

.stat-item strong {
    color: #333;
    font-weight: bold;
}

/* 소개 문구 */
#card-bio {
    background: #EBEBF5;
    padding: 15px;
    border-radius: 8px;
    font-style: italic;
    font-size: 16px;
    color: #444;
    line-height: 1.4;
    margin-bottom: 20px;
    border-left: 4px solid var(--noblesse-gold);
}

/* 취미 해시태그 */
#card-hobbies-title {
    color: #555;
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 10px;
    border-top: 1px dashed #DDD;
    padding-top: 15px;
}

#card-hobbies-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.hobby-tag {
    background: var(--noblesse-gold);
    color: #FFF;
    padding: 6px 10px;
    border-radius: 20px;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* 다운로드 버튼 */
#download-button {
    width: 100%;
    padding: 12px;
    margin-top: 20px;
    background: #33334F;
    color: var(--noblesse-gold);
    border: 2px solid var(--noblesse-gold);
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s;
}

#download-button:hover {
    background: #44446F;
}

</style>
</head>

<body>
<div id="app-container">
    <div id="input-form">
        <h2>⚜️ NOBLESSE 프로필 카드 생성기</h2>

        <div class="input-group">
            <label>1. 프로필 사진 (파일 선택)</label>
            <input type="file" id="photo-upload" accept="image/*">
        </div>

        <div class="input-group">
            <label>2. 이름</label>
            <input type="text" id="input-name" value="김노블레스">
        </div>
        
        <div class="input-group">
            <label>3. 나이</label>
            <input type="text" id="input-age" value="30">
        </div>

        <div class="input-group">
            <label>4. 키 (cm)</label>
            <input type="text" id="input-height" value="178">
        </div>

        <div class="input-group">
            <label>5. 몸무게 (kg)</label>
            <input type="text" id="input-weight" value="70">
        </div>

        <div class="input-group">
            <label>6. 가슴 사이즈</label>
            <select id="input-size">
                <option>A컵</option>
                <option>B컵</option>
                <option selected>C컵</option>
                <option>D컵</option>
                <option>E컵 이상</option>
            </select>
        </div>

        <div class="input-group">
            <label>7. 직업</label>
            <input type="text" id="input-job" value="전문직">
        </div>

        <div class="input-group">
            <label>8. 한 줄 소개</label>
            <textarea id="input-bio" rows="3">품격있는 만남을 추구하며, 진중한 대화를 즐깁니다.</textarea>
        </div>

        <div class="input-group">
            <label>9. 취미 (쉼표(,)로 구분)</label>
            <input type="text" id="input-hobbies" value="클래식 감상, 와인 테이스팅, 독서, 골프">
        </div>
        
        <button id="generate-button">✨ 프로필 카드 생성/업데이트</button>
    </div>

    <div id="profile-card-wrapper" style="position: relative;">
        <div id="profile-card-container">
            <div id="card-header">
                <div id="noblesse-logo" style="background-image: url('noblesse_logo.png');"></div>
                <div id="card-title">NOBLESSE</div>
            </div>

            <div id="profile-photo">
                사진을 선택하여 업로드 해주세요
            </div>

            <div id="card-body">
                <h3 id="output-name-age">김노블레스, 30</h3>
                
                <div id="card-stats">
                    <span class="stat-item">키: <strong id="output-height">178cm</strong></span>
                    <span class="stat-item">몸무게: <strong id="output-weight">70kg</strong></span>
                    <span class="stat-item">사이즈: <strong id="output-size">C컵</strong></span>
                    <span class="stat-item">직업: <strong id="output-job">전문직</strong></span>
                </div>

                <div id="card-bio">
                    "품격있는 만남을 추구하며, 진중한 대화를 즐깁니다."
                </div>

                <div id="card-hobbies-title"># 나의 취미</div>
                <div id="card-hobbies-list">
                    <span class="hobby-tag">클래식 감상</span>
                    <span class="hobby-tag">와인 테이스팅</span>
                    <span class="hobby-tag">독서</span>
                    <span class="hobby-tag">골프</span>
                </div>
            </div>
        </div>

        <button id="download-button">프로필 카드 이미지 다운로드 (.png)</button>
    </div>

</div>

<script>
// ======================================================================================
// ⭐️ 데이터 업데이트 및 프로필 카드 생성 로직
// ======================================================================================
const photoUpload = document.getElementById('photo-upload');
const generateButton = document.getElementById('generate-button');
const downloadButton = document.getElementById('download-button');
const profileCard = document.getElementById('profile-card-container');
const profilePhoto = document.getElementById('profile-photo');

function updateProfileCard() {
    const name = document.getElementById('input-name').value;
    const age = document.getElementById('input-age').value;
    const height = document.getElementById('input-height').value;
    const weight = document.getElementById('input-weight').value;
    const size = document.getElementById('input-size').value;
    const job = document.getElementById('input-job').value;
    const bio = document.getElementById('input-bio').value;
    // 쉼표로 구분된 취미를 배열로 변환
    const hobbies = document.getElementById('input-hobbies').value.split(',').map(h => h.trim()).filter(h => h.length > 0);

    // 1. 기본 정보 업데이트
    document.getElementById('output-name-age').textContent = `${name}, ${age}`;
    document.getElementById('output-height').textContent = `${height}cm`;
    document.getElementById('output-weight').textContent = `${weight}kg`;
    document.getElementById('output-size').textContent = size;
    document.getElementById('output-job').textContent = job;
    document.getElementById('card-bio').textContent = `"${bio}"`;

    // 2. 취미 태그 업데이트
    const hobbiesList = document.getElementById('card-hobbies-list');
    hobbiesList.innerHTML = '';
    hobbies.forEach(hobby => {
        const tag = document.createElement('span');
        tag.className = 'hobby-tag';
        tag.textContent = hobby;
        hobbiesList.appendChild(tag);
    });
}

// 초기 로드 시 한 번 업데이트
document.addEventListener('DOMContentLoaded', updateProfileCard);
generateButton.addEventListener('click', updateProfileCard);


// ======================================================================================
// ⭐️ 사진 미리보기 및 파일 업로드 로직
// ======================================================================================
photoUpload.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = (event) => {
            // 이미지가 로드되면 profilePhoto 영역을 이미지로 채웁니다.
            profilePhoto.innerHTML = `<img src="${event.target.result}" alt="프로필 사진">`;
        };
        reader.readAsDataURL(file);
    }
});


// ======================================================================================
// ⭐️ 이미지 다운로드 (html2canvas 사용)
// ======================================================================================
downloadButton.addEventListener('click', () => {
    // 1. 다운로드 버튼을 잠시 숨김 (카드 이미지에 포함되지 않도록)
    const originalDownloadStyle = downloadButton.style.display;
    downloadButton.style.display = 'none';

    // 2. html2canvas로 카드 영역 캡처
    html2canvas(profileCard, { 
        backgroundColor: '#F8F8F8', // 배경색을 명확히 지정하여 흰색 배경을 유지
        scale: 2 // 고화질 캡처
    }).then(canvas => {
        // 3. 숨겼던 버튼 다시 표시
        downloadButton.style.display = originalDownloadStyle;

        // 4. 캔버스를 이미지 파일로 변환하여 다운로드
        const a = document.createElement('a');
        a.href = canvas.toDataURL('image/png');
        a.download = 'NOBLESSE_프로필_카드.png';
        a.click();
    });
});
</script>
</body>
</html>
