<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ‘‘ ë…¸ë¸”ë ˆìŠ¤ í”„ë¦¬ë¯¸ì—„ ì¹´ë“œ</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        /* ê¸°ë³¸ ì„¤ì • */
        body { font-family: 'Malgun Gothic', 'Arial', sans-serif; background-color: #f5f5f5; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        .wrapper { display: flex; gap: 40px; max-width: 1200px; margin: 0 auto; }
        h2 { color: #8b794e; text-align: center; margin-bottom: 25px; } 

        /* ì…ë ¥ í¼ ìŠ¤íƒ€ì¼ */
        .input-panel { width: 400px; background-color: white; padding: 30px; border-radius: 12px; box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1); height: fit-content; }
        .form-group { margin-bottom: 18px; }
        label { display: block; font-weight: bold; margin-bottom: 6px; color: #444; }
        input[type="text"], input[type="number"], textarea, input[type="file"], select { 
            width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 8px; box-sizing: border-box; transition: border-color 0.3s; 
        }
        input:focus, textarea:focus, select:focus { border-color: #d4af37; outline: none; }
        textarea { resize: vertical; height: 60px; }
        
        /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .btn-primary { background-color: #d4af37; color: #192a56; padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; width: 100%; font-weight: bold; transition: background-color 0.3s, transform 0.1s; margin-top: 10px;}
        .btn-primary:hover { background-color: #c09e30; transform: translateY(-1px); }
        .btn-download { background-color: #192a56; color: #d4af37; padding: 10px 20px; border: 2px solid #d4af37; border-radius: 8px; cursor: pointer; font-size: 14px; width: 100%; font-weight: bold; margin-top: 15px; transition: background-color 0.3s; }
        .btn-download:hover { background-color: #2c3e50; }

        /* ------------------------------------------- */
        /* í”„ë¡œí•„ ì¹´ë“œ ìŠ¤íƒ€ì¼ (ì´ë¯¸ì§€ í…œí”Œë¦¿ ë°˜ì˜) */
        /* ------------------------------------------- */
        .profile-output { position: relative; } /* ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ìœ„ì¹˜ ê¸°ì¤€ */
        .profile-card { 
            width: 700px; 
            height: 400px; 
            background-color: #192a56; /* ë„¤ì´ë¹„ ë°”íƒ• */
            /* ì€ì€í•œ íŒ¨í„´ ì¶”ê°€ (ì„ íƒ ì‚¬í•­) */
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 10 10"><rect width="10" height="10" fill="%23192a56"/><path d="M0 0h5v5H0zM5 5h5v5H5z" fill-opacity="0.08" fill="%23FFFFFF"/></svg>'); 
            border: 5px solid #d4af37; /* ë‘êº¼ìš´ ê³¨ë“œ í”„ë ˆì„ */
            border-radius: 8px; 
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
            margin-top: 20px;
            color: white;
            display: flex; 
            padding: 15px;
            box-sizing: border-box;
        }

        /* ì™¼ìª½ ì •ë³´ íŒ¨ë„ */
        .card-left-panel {
            width: 45%; 
            padding-right: 20px;
            display: flex;
            flex-direction: column;
        }

        /* ë¡œê³  ì˜ì—­ */
        .logo-area { text-align: center; margin-bottom: 25px; }
        .noblesse-logo-img { /* Base64 ì´ë¯¸ì§€ëŠ” ì œê±°í•˜ê³  í…ìŠ¤íŠ¸ ë¡œê³ ë¡œ ëŒ€ì²´ (Base64ê°€ ë„ˆë¬´ ê¸¸ì–´ì„œ ê°€ë…ì„± ì €í•˜) */
            display: none; /* ì‹¤ì œ ë¡œê³  ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ê²½ìš° ìˆ¨ê¹€ */
        }
        .noblesse-text { 
            font-family: 'Times New Roman', serif; 
            font-size: 30px; /* ë” í¬ê²Œ */
            font-style: italic;
            color: #d4af37;
            margin-top: 5px;
            font-weight: 600;
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.3);
        }
        
        /* ì •ë³´ ë¦¬ìŠ¤íŠ¸ */
        .info-list { margin-top: 20px; }
        .info-item { 
            display: grid;
            grid-template-columns: 20px 80px 1fr; /* ì•„ì´ì½˜, ë ˆì´ë¸”, ê°’ ìˆœì„œ */
            align-items: center; 
            margin-bottom: 12px; 
            font-size: 1.1em;
        }
        .info-item .icon { font-size: 1.2em; margin-right: 12px; color: #d4af37; } 
        .info-item .label { color: white; margin-right: 10px; font-weight: bold; font-size: 0.9em; letter-spacing: 1px; }
        .info-item .value { color: #d4af37; font-weight: bold; }
        .info-item.name-row .value { color: white; font-size: 1.3em; margin-top: -5px; } /* ì´ë¦„ ê°•ì¡° */
        .info-item.job { margin-bottom: 25px; }

        /* ë§¤ë ¥ ì–´í•„ ì˜ì—­ */
        .tagline-area {
            margin-top: auto; /* í•˜ë‹¨ìœ¼ë¡œ ë°€ì–´ëƒ„ */
            padding: 15px;
            border: 1px solid #d4af37; /* ê³¨ë“œ í…Œë‘ë¦¬ */
            border-radius: 4px;
            background-color: rgba(0, 0, 0, 0.2); /* ë°°ê²½ ì•½ê°„ ì–´ë‘¡ê²Œ */
        }
        .tagline-area h4 { color: #d4af37; margin-bottom: 8px; font-size: 1em; font-weight: bold; text-align: center; }
        .tagline-area p { font-style: normal; font-size: 1em; line-height: 1.5; color: white; text-align: center; }

        /* ì‚¬ì§„ ì˜ì—­ (ì§ì‚¬ê°í˜•) */
        .profile-photo-container {
            width: 55%; 
            height: 100%; 
            background-color: #2c3e50;
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            color: #aaa;
            font-style: italic;
            cursor: pointer; 
            border: 3px solid #d4af37; /* ì´ë¯¸ì§€ ìì²´ì— ê³¨ë“œ í…Œë‘ë¦¬ */
            border-radius: 4px;
            overflow: hidden;
            font-size: 1.2em;
            text-align: center;
        }
        .profile-photo-container.drag-over {
            border-color: #fff; 
            background-color: #3d506d;
        }
        
        /* --- ì•„ì´ì½˜ ëŒ€ì²´ í…ìŠ¤íŠ¸ --- */
        .icon-name::before { content: 'ğŸ‘¤'; }
        .icon-age::before { content: 'ğŸ‚'; } 
        .icon-bust::before { content: 'ğŸ’–'; }
        .icon-height::before { content: 'ğŸ“'; }
        .icon-weight::before { content: 'âš–ï¸'; }
        .icon-job::before { content: 'ğŸ’¼'; }
    </style>
</head>
<body>

<h2>ğŸ‘‘ ë…¸ë¸”ë ˆìŠ¤ í”„ë¦¬ë¯¸ì—„ í”„ë¡œí•„ ìƒì„±ê¸°</h2>

<div class="wrapper">
    
    <div class="input-panel">
        <form id="profileForm">
            <div class="form-group">
                <label for="profilePhotoInput">1. í”„ë¡œí•„ ì‚¬ì§„ (íŒŒì¼ ì„ íƒ ë˜ëŠ” ë“œë˜ê·¸ & ë“œë¡­)</label>
                <input type="file" id="profilePhotoInput" accept="image/*">
            </div>
            
            <div class="form-group">
                <label for="name">2. ì´ë¦„</label>
                <input type="text" id="name" value="ì •í˜„ë¦¬" required>
            </div>

            <div class="form-group">
                <label for="age">3. ë‚˜ì´</label>
                <input type="number" id="age" value="34" min="18" max="99" required>
            </div>

            <div class="form-group">
                <label for="height">4. í‚¤ (cm)</label>
                <input type="number" id="height" value="168" min="140" max="190" required>
            </div>
            
            <div class="form-group">
                <label for="weight">5. ëª¸ë¬´ê²Œ (kg)</label>
                <input type="number" id="weight" value="49" min="30" max="150" required>
            </div>
            
            <div class="form-group">
                <label for="bustSize">6. ê°€ìŠ´ ì‚¬ì´ì¦ˆ</label>
                <select id="bustSize" required>
                    <option value="A">A</option>
                    <option value="B" selected>B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                    <option value="E">E ì´ìƒ</option>
                </select>
            </div>

            <div class="form-group">
                <label for="occupation">7. ì§ì—…</label>
                <input type="text" id="occupation" value="ì „ë¬¸ì§" required>
            </div>
            
            <div class="form-group">
                <label for="tagline">8. ë§¤ë ¥ ì–´í•„ ë¬¸êµ¬</label>
                <textarea id="tagline" required>ë‚´ ë§¤ë ¥ì— ë¹ ì§€ëŠ” ê±´ ì„ íƒì´ ì•„ë‹ˆë¼, ì˜¤ëŠ˜ ë°¤ ë‹¹ì‹ ì˜ ìš´ëª…ì´ì—ìš”.</textarea>
            </div>

            <button type="submit" class="btn-primary">âœ¨ ë…¸ë¸”ë ˆìŠ¤ ì¹´ë“œ ìƒì„±/ì—…ë°ì´íŠ¸</button>
            <button type="button" id="downloadCard" class="btn-download">ğŸ’¾ ì¹´ë“œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ (PNG)</button>
        </form>
    </div>

    <div class="profile-output">
        <div class="profile-card" id="profileCardToCapture">
            
            <div class="card-left-panel">
                <div class="logo-area">
                    <span class="noblesse-text">NOBLESSE</span>
                </div>
                
                <div class="info-list">
                    <div class="info-item name-row">
                        <span class="icon icon-name"></span>
                        <span class="label">ì´ë¦„</span>
                        <span class="value" id="cardName">ì •í˜„ë¦¬</span>
                    </div>

                    <div class="info-item">
                        <span class="icon icon-age"></span>
                        <span class="label">ë‚˜ì´</span>
                        <span class="value" id="cardAge">34</span>
                    </div>

                    <div class="info-item">
                        <span class="icon icon-height"></span>
                        <span class="label">í‚¤</span>
                        <span class="value" id="cardHeight">168cm</span>
                    </div>

                    <div class="info-item">
                        <span class="icon icon-weight"></span>
                        <span class="label">ëª¸ë¬´ê²Œ</span>
                        <span class="value" id="cardWeight">49kg</span>
                    </div>
                    
                    <div class="info-item">
                        <span class="icon icon-bust"></span>
                        <span class="label">ê°€ìŠ´</span>
                        <span class="value" id="cardBust">B</span>
                    </div>

                    <div class="info-item job">
                        <span class="icon icon-job"></span>
                        <span class="label">JOB</span>
                        <span class="value" id="cardOccupation">ì „ë¬¸ì§</span>
                    </div>
                </div>

                <div class="tagline-area">
                    <h4>SPECIAL MESSAGE</h4>
                    <p id="cardTagline">ë‚´ ë§¤ë ¥ì— ë¹ ì§€ëŠ” ê±´ ì„ íƒì´ ì•„ë‹ˆë¼, ì˜¤ëŠ˜ ë°¤ ë‹¹ì‹ ì˜ ìš´ëª…ì´ì—ìš”.</p>
                </div>

            </div>

            <div class="profile-photo-container" id="photoContainer">
                ì‚¬ì§„ì„ ë“œë˜ê·¸í•˜ê±°ë‚˜ ì„ íƒí•˜ì—¬ ë„£ì–´ì£¼ì„¸ìš”
            </div>

        </div>
    </div>
</div>

<script>
    // --- ìš”ì†Œ ìºì‹œ ---
    const form = document.getElementById('profileForm');
    const photoInput = document.getElementById('profilePhotoInput');
    const photoContainer = document.getElementById('photoContainer');
    const downloadButton = document.getElementById('downloadCard');

    // --- ë°ì´í„° ì—…ë°ì´íŠ¸ í•¨ìˆ˜ ---
    const updateCard = () => {
        // ì…ë ¥ ê°’ ê°€ì ¸ì˜¤ê¸°
        const name = document.getElementById('name').value;
        const age = document.getElementById('age').value;
        const height = document.getElementById('height').value;
        const weight = document.getElementById('weight').value;
        const bustSize = document.getElementById('bustSize').value;
        const occupation = document.getElementById('occupation').value;
        const tagline = document.getElementById('tagline').value;

        // ì¹´ë“œì— ë°˜ì˜
        document.getElementById('cardName').textContent = name;
        document.getElementById('cardAge').textContent = age;
        document.getElementById('cardHeight').textContent = `${height}cm`;
        document.getElementById('cardWeight').textContent = `${weight}kg`;
        document.getElementById('cardBust').textContent = bustSize;
        document.getElementById('cardOccupation').textContent = occupation;
        document.getElementById('cardTagline').textContent = tagline;
    };

    // --- ì‚¬ì§„ ì²˜ë¦¬ í•¨ìˆ˜ ---
    const handlePhotoFile = (file) => {
        if (file && file.type.startsWith('image/')) {
            const reader = new FileReader();
            reader.onload = (e) => {
                photoContainer.style.backgroundImage = `url('${e.target.result}')`;
                photoContainer.textContent = ''; // í…ìŠ¤íŠ¸ ì œê±°
            };
            reader.readAsDataURL(file);
        } else {
            alert('ì´ë¯¸ì§€ íŒŒì¼ë§Œ ì„ íƒí•´ ì£¼ì„¸ìš”.');
        }
    };

    // --- ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ---

    // 1. í¼ ì œì¶œ ì‹œ ì¹´ë“œ ì—…ë°ì´íŠ¸
    form.addEventListener('submit', (e) => {
        e.preventDefault();
        updateCard();
    });

    // 2. íŒŒì¼ ì…ë ¥ ì‹œ ì‚¬ì§„ ì²˜ë¦¬
    photoInput.addEventListener('change', (e) => {
        handlePhotoFile(e.target.files[0]);
    });

    // 3. ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì²˜ë¦¬
    ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
        photoContainer.addEventListener(eventName, (e) => {
            e.preventDefault();
            e.stopPropagation();
        }, false);
    });

    // ë“œë˜ê·¸ ì˜¤ë²„ ì‹œ ìŠ¤íƒ€ì¼ ë³€ê²½
    ['dragenter', 'dragover'].forEach(eventName => {
        photoContainer.addEventListener(eventName, () => {
            photoContainer.classList.add('drag-over');
        }, false);
    });
    ['dragleave', 'drop'].forEach(eventName => {
        photoContainer.addEventListener(eventName, () => {
            photoContainer.classList.remove('drag-over');
        }, false);
    });

    // ë“œë¡­ ì‹œ íŒŒì¼ ì²˜ë¦¬
    photoContainer.addEventListener('drop', (e) => {
        const droppedFiles = e.dataTransfer.files;
        handlePhotoFile(droppedFiles[0]);
    }, false);

    // 4. ì´ˆê¸° ë¡œë“œ ì‹œ ì¹´ë“œ ì—…ë°ì´íŠ¸
    window.onload = updateCard;

    // 5. ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ ê¸°ëŠ¥
    downloadButton.addEventListener('click', () => {
        const cardElement = document.getElementById('profileCardToCapture');
        
        // html2canvasë¥¼ ì‚¬ìš©í•˜ì—¬ DOM ìš”ì†Œë¥¼ ìº”ë²„ìŠ¤ë¡œ ë³€í™˜
        html2canvas(cardElement, {
            scale: 2, // ê³ í•´ìƒë„ ì´ë¯¸ì§€ë¥¼ ìœ„í•´ ìŠ¤ì¼€ì¼ ì¡°ì • (ì„ ëª…ë„ ê°œì„ )
            allowTaint: true, // ì™¸ë¶€ ì´ë¯¸ì§€ ë¡œë”© í—ˆìš©
            useCORS: true // CORS ë¬¸ì œ í•´ê²° ì‹œë„
        }).then(canvas => {
            // ìº”ë²„ìŠ¤ ë°ì´í„°ë¥¼ ì´ë¯¸ì§€ URLë¡œ ë³€í™˜
            const imageURL = canvas.toDataURL('image/png');
            
            // ë‹¤ìš´ë¡œë“œë¥¼ ìœ„í•œ ì„ì‹œ ë§í¬ ìƒì„±
            const a = document.createElement('a');
            a.href = imageURL;
            a.download = 'Noblesse_Profile_Card.png';
            
            // ë§í¬ í´ë¦­ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ ì‹¤í–‰
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
        });
    });

</script>

</body>
</html>
