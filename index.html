<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>⚜️ NOBLESSE 프로필 카드 생성기</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<style>
/* 폰트 설정 및 전체 배경 */
body {
    font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
    margin: 0;
    /* 노블레스 테마: 짙은 남색 배경 */
    background: #1A1A2E; 
    color: #F0F0F0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 20px;
}

/* ⚜️ 메인 컨테이너 */
#app-container {
    display: flex;
    gap: 40px;
    background: #282A45; /* 살짝 밝은 배경 */
    padding: 30px;
    border-radius: 15px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
    /* 노블레스 포인트 색상 (금색 계열) */
    --noblesse-gold: #CFA632; 
}

/* ⬅️ 입력 폼 스타일 */
#input-form {
    width: 400px;
}

#input-form h2 {
    color: var(--noblesse-gold);
    border-bottom: 2px solid var(--noblesse-gold);
    padding-bottom: 10px;
    margin-bottom: 20px;
    font-size: 24px;
}

.input-group {
    margin-bottom: 15px;
}

.input-group label {
    display: block;
    font-weight: bold;
    margin-bottom: 5px;
    color: #E0E0E0;
}

.input-group input[type="text"], 
.input-group select, 
.input-group textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid #444;
    border-radius: 8px;
    background: #333;
    color: #FFF;
    font-size: 16px;
    box-sizing: border-box;
    transition: border-color 0.3s;
}

.input-group input:focus, 
.input-group select:focus, 
.input-group textarea:focus {
    border-color: var(--noblesse-gold);
    outline: none;
}

/* 버튼 스타일 */
#generate-button {
    width: 100%;
    padding: 15px;
    margin-top: 20px;
    background: var(--noblesse-gold);
    color: #1A1A2E;
    border: none;
    border-radius: 8px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    transition: background-color 0.3s, transform 0.1s;
}

#generate-button:hover {
    background: #DFAE40;
}
#generate-button:active {
    transform: scale(0.99);
}

/* ➡️ 프로필 카드 출력부 (핵심) */
#profile-card-container {
    width: 420px;
    min-height: 600px;
    background: #222233; /* 어두운 카드 배경 */
    border: 3px solid var(--noblesse-gold);
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 0 20px rgba(207, 166, 50, 0.3);
    position: relative;
}

/* 로고 및 제목 */
#card-header {
    text-align: center;
    padding-bottom: 15px;
    margin-bottom: 15px;
    border-bottom: 1px solid #444;
}

/* 로고 이미지 자리 (실제 로고 이미지 파일이 필요합니다) */
#noblesse-logo {
    width: 150px; 
    height: auto;
    margin-bottom: 10px;
}

/* 임시 로고 스타일 (실제 이미지 없을 경우) */
.logo-placeholder {
    font-size: 28px;
    font-weight: bold;
    color: var(--noblesse-gold);
    text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
}


/* 프로필 사진 자리 */
#profile-photo {
    width: 100%;
    height: 300px; /* 높이 조정 */
    background: #333;
    border-radius: 8px;
    margin-bottom: 20px;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #AAA;
    font-style: italic;
    border: 1px dashed #555;
    overflow: hidden;
}

/* 카드 본문 */
#card-body h3 {
    font-size: 30px;
    color: #FFF;
    margin: 0 0 10px 0;
    font-weight: 800;
}

#card-stats {
    display: flex;
    flex-wrap: wrap;
    font-size: 16px;
    color: #AAA;
    margin-bottom: 15px;
}

.stat-item {
    margin-right: 20px;
    margin-bottom: 5px;
}

.stat-item strong {
    color: var(--noblesse-gold);
    font-weight: normal;
}

/* 소개 문구 */
#card-bio {
    background: #33334F;
    padding: 15px;
    border-radius: 8px;
    font-style: italic;
    font-size: 17px;
    color: #FFF;
    line-height: 1.5;
    margin-bottom: 20px;
    border-left: 5px solid var(--noblesse-gold);
}

/* 취미 해시태그 */
#card-hobbies-title {
    color: var(--noblesse-gold);
    font-size: 18px;
    font-weight: bold;
    margin-bottom: 10px;
}

#card-hobbies-list {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
}

.hobby-tag {
    background: #444466;
    color: #EEE;
    padding: 6px 12px;
    border-radius: 15px;
    font-size: 14px;
    border: 1px solid #555;
}

/* 다운로드 버튼 */
#download-button {
    position: absolute;
    bottom: -50px; /* 카드 아래로 위치 */
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 20px;
    background: #444466;
    color: var(--noblesse-gold);
    border: 2px solid var(--noblesse-gold);
    border-radius: 8px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s;
}

#download-button:hover {
    background: #555577;
}

</style>
</head>

<body>
<div id="app-container">
    <div id="input-form">
        <h2>⚜️ NOBLESSE 프로필 카드 생성기</h2>

        <div class="input-group">
            <label>1. 프로필 사진 (파일 선택 또는 드래그 & 드롭)</label>
            <input type="file" id="photo-upload" accept="image/*">
        </div>

        <div class="input-group">
            <label>2. 이름</label>
            <input type="text" id="input-name" value="김노블레스">
        </div>
        
        <div class="input-group">
            <label>3. 나이</label>
            <input type="text" id="input-age" value="30">
        </div>

        <div class="input-group">
            <label>4. 키 (cm)</label>
            <input type="text" id="input-height" value="178">
        </div>

        <div class="input-group">
            <label>5. 몸무게 (kg)</label>
            <input type="text" id="input-weight" value="70">
        </div>

        <div class="input-group">
            <label>6. 가슴 사이즈</label>
            <select id="input-size">
                <option>A컵</option>
                <option>B컵</option>
                <option selected>C컵</option>
                <option>D컵</option>
                <option>E컵 이상</option>
            </select>
        </div>

        <div class="input-group">
            <label>7. 직업</label>
            <input type="text" id="input-job" value="전문직">
        </div>

        <div class="input-group">
            <label>8. 한 줄 소개</label>
            <textarea id="input-bio" rows="3">품격있는 만남을 추구하며, 진중한 대화를 즐깁니다.</textarea>
        </div>

        <div class="input-group">
            <label>9. 취미 (쉼표(,)로 구분)</label>
            <input type="text" id="input-hobbies" value="클래식 감상, 와인 테이스팅, 독서, 골프">
        </div>
        
        <button id="generate-button">✨ 프로필 카드 생성/업데이트</button>
    </div>

    <div id="profile-card-wrapper" style="position: relative;">
        <div id="profile-card-container">
            <div id="card-header">
                <div class="logo-placeholder">⚜️ NOBLESSE</div>
            </div>

            <div id="profile-photo">
                사진을 여기에 넣어주세요
            </div>

            <div id="card-body">
                <h3 id="output-name-age">이름, 나이</h3>
                
                <div id="card-stats">
                    <span class="stat-item">키: <strong id="output-height">0cm</strong></span>
                    <span class="stat-item">몸무게: <strong id="output-weight">0kg</strong></span>
                    <span class="stat-item">사이즈: <strong id="output-size">C컵</strong></span>
                    <span class="stat-item">직업: <strong id="output-job">직업명</strong></span>
                </div>

                <div id="card-bio">
                    "여기에 한 줄 소개가 들어갑니다."
                </div>

                <div id="card-hobbies-title"># 나의 취미</div>
                <div id="card-hobbies-list">
                    </div>
            </div>
        </div>

        <button id="download-button">프로필 카드 이미지 다운로드 (.png)</button>
    </div>

</div>

<script>
// ======================================================================================
// ⭐️ 데이터 업데이트 및 프로필 카드 생성 로직
// ======================================================================================
const photoUpload = document.getElementById('photo-upload');
const generateButton = document.getElementById('generate-button');
const downloadButton = document.getElementById('download-button');
const profileCard = document.getElementById('profile-card-container');
const profilePhoto = document.getElementById('profile-photo');

function updateProfileCard() {
    const name = document.getElementById('input-name').value;
    const age = document.getElementById('input-age').value;
    const height = document.getElementById('input-height').value;
    const weight = document.getElementById('input-weight').value;
    const size = document.getElementById('input-size').value;
    const job = document.getElementById('input-job').value;
    const bio = document.getElementById('input-bio').value;
    const hobbies = document.getElementById('input-hobbies').value.split(',').map(h => h.trim()).filter(h => h.length > 0);

    // 1. 기본 정보 업데이트
    document.getElementById('output-name-age').textContent = `${name}, ${age}`;
    document.getElementById('output-height').textContent = `${height}cm`;
    document.getElementById('output-weight').textContent = `${weight}kg`;
    document.getElementById('output-size').textContent = size;
    document.getElementById('output-job').textContent = job;
    document.getElementById('card-bio').textContent = `"${bio}"`;

    // 2. 취미 태그 업데이트
    const hobbiesList = document.getElementById('card-hobbies-list');
    hobbiesList.innerHTML = '';
    hobbies.forEach(hobby => {
        const tag = document.createElement('span');
        tag.className = 'hobby-tag';
        tag.textContent = hobby;
        hobbiesList.appendChild(tag);
    });
}

// 초기 로드 시 한 번 업데이트
document.addEventListener('DOMContentLoaded', updateProfileCard);
generateButton.addEventListener('click', updateProfileCard);


// ======================================================================================
// ⭐️ 사진 미리보기 및 파일 업로드 로직
// ======================================================================================
photoUpload.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (file) {
        const reader = new FileReader();
        reader.onload = (event) => {
            profilePhoto.innerHTML = `<img src="${event.target.result}" style="width: 100%; height: 100%; object-fit: cover; border-radius: 8px;">`;
        };
        reader.readAsDataURL(file);
    }
});


// ======================================================================================
// ⭐️ 이미지 다운로드 (html2canvas 사용)
// ======================================================================================
downloadButton.addEventListener('click', () => {
    // 1. 다운로드 버튼을 잠시 숨김 (카드 이미지에 포함되지 않도록)
    downloadButton.style.display = 'none';

    // 2. html2canvas로 카드 영역 캡처
    html2canvas(profileCard, { 
        backgroundColor: null, // 배경색을 투명하게 처리 (필요에 따라)
        scale: 2 // 고화질 캡처
    }).then(canvas => {
        // 3. 숨겼던 버튼 다시 표시
        downloadButton.style.display = 'block';

        // 4. 캔버스를 이미지 파일로 변환하여 다운로드
        const a = document.createElement('a');
        a.href = canvas.toDataURL('image/png');
        a.download = 'NOBLESSE_프로필_카드.png';
        a.click();
    });
});
</script>
</body>
</html>
