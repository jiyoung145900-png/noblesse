<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>ğŸŒ¸ ì—˜ë ˆê°•ìŠ¤ í”„ë¡œí•„ ì¹´ë“œ ìƒì„±ê¸°</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;600;700&family=Playfair+Display:wght@400;700;900&display=swap" rel="stylesheet">

<style>
/* í°íŠ¸ ë° ì „ì²´ ë°°ê²½ (ìŠ¤íƒ€ì¼ ë³€í™” ì—†ìŒ) */
body {
    font-family: 'Noto Sans KR', sans-serif;
    margin: 0;
    background: linear-gradient(to bottom right, #F5EFE6, #E8D8C4);
    color: #4A4A4A;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    padding: 40px;
    font-size: 15px;
}

/* ğŸŒ¸ ë©”ì¸ ì»¨í…Œì´ë„ˆ */
#app-container {
    display: flex;
    gap: 50px;
    background: #FFFFFF;
    padding: 40px;
    border-radius: 20px;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    border: 1px solid #E0E0E0;
    max-width: 1000px;
    width: 100%;

    --elegance-pink: #D4AFB9;
    --elegance-gold: #B8860B;
    --elegance-dark: #6C5B7B;
}

/* â¬…ï¸ ì…ë ¥ í¼ ì˜ì—­ */
#input-form {
    width: 400px;
    padding: 25px;
    border: 1px solid var(--elegance-pink);
    border-radius: 15px;
    background: #FFF8F0;
    box-shadow: 0 0 20px rgba(212, 175, 185, 0.2);
}

#input-form h2 {
    font-family: 'Playfair Display', serif;
    color: var(--elegance-dark);
    text-align: center;
    font-size: 26px;
    margin-bottom: 30px;
    letter-spacing: 1.2px;
    font-weight: 700;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
}
#input-form h2 .logo-icon {
    width: 35px; height: 35px;
    vertical-align: middle;
    background-image: url('noblesse_logo.png');
    background-size: cover;
    background-position: center;
    display: inline-block;
}

.input-group {
    margin-bottom: 20px;
}

.input-group label {
    font-family: 'Noto Sans KR', sans-serif;
    display: block;
    font-weight: 600;
    margin-bottom: 8px;
    color: #6A6A6A;
    font-size: 15px;
}

.input-group input[type="text"],
.input-group select,
.input-group textarea {
    font-family: 'Noto Sans KR', sans-serif;
    width: 100%;
    padding: 12px;
    border: 1px solid #CCC;
    border-radius: 8px;
    background: #FFFFFF;
    color: #4A4A4A;
    font-size: 15px;
    box-sizing: border-box;
    transition: border-color 0.3s, box-shadow 0.3s;
}

/* ğŸŒŸ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì˜ì—­ ìŠ¤íƒ€ì¼ */
#drop-area {
    border: 2px dashed #D4AFB9;
    padding: 20px;
    text-align: center;
    color: #999;
    cursor: pointer;
    border-radius: 10px;
    transition: background-color 0.3s, border-color 0.3s;
    margin-bottom: 15px;
}

#drop-area.highlight {
    background-color: #F8F0F5;
    border-color: #A96E7E;
}

#drop-area input[type="file"] {
    display: none; /* ìˆ¨ê¹€ */
}

#drop-area-text {
    font-size: 14px;
    font-weight: 500;
    color: #888;
}

/* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
#generate-button {
    font-family: 'Noto Sans KR', sans-serif;
    width: 100%;
    padding: 16px;
    margin-top: 30px;
    background: linear-gradient(to right, var(--elegance-pink), #E8BF92);
    color: #FFFFFF;
    border: none;
    border-radius: 10px;
    font-size: 18px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    letter-spacing: 0.8px;
}

#generate-button:hover {
    background: linear-gradient(to right, #E8BF92, var(--elegance-pink));
    transform: translateY(-2px);
    box-shadow: 0 7px 20px rgba(0, 0, 0, 0.25);
}

/* â¡ï¸ í”„ë¡œí•„ ì¹´ë“œ ì¶œë ¥ë¶€ */
#profile-card-wrapper {
    position: relative;
    padding-bottom: 70px;
}
#profile-card-container {
    width: 420px;
    background: #FFFFFF;
    border: 1px solid var(--elegance-pink);
    border-radius: 15px;
    box-shadow: 0 0 30px rgba(212, 175, 185, 0.3);
    overflow: hidden;
    color: #333;
}

/* ì¹´ë“œ ìƒë‹¨ ë¡œê³  ë° ì œëª© ì˜ì—­ */
#card-header {
    background: linear-gradient(to right, var(--elegance-dark), #4A4A4A);
    padding: 18px 0;
    text-align: center;
    border-bottom: 2px solid var(--elegance-gold);
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
}

#card-header .logo-image {
    width: 40px;
    height: 40px;
    object-fit: contain;
}
#card-header #card-title {
    font-family: 'Playfair Display', serif;
    font-size: 24px;
    color: #F8F8F8;
    font-weight: 700;
    letter-spacing: 2px;
    text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
}

/* í”„ë¡œí•„ ì‚¬ì§„ ìë¦¬ */
#profile-photo {
    width: 100%;
    height: 350px;
    background: #F0F0F0;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #AAA;
    font-style: italic;
    overflow: hidden;
    font-size: 16px;
}
#profile-photo img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* ì¹´ë“œ ë³¸ë¬¸ */
#card-body {
    padding: 25px;
}

#output-name-age {
    font-family: 'Playfair Display', serif;
    font-size: 28px;
    color: var(--elegance-gold);
    font-weight: 800;
    margin: 0 0 15px 0;
    text-align: center;
    text-shadow: 0.5px 0.5px 1px rgba(0,0,0,0.1);
}

#card-stats {
    font-family: 'Noto Sans KR', sans-serif;
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    font-size: 15px;
    color: #666;
    margin-bottom: 20px;
    gap: 15px;
}

.stat-item {
    padding: 5px 10px;
    background: #F5F5F5;
    border-radius: 5px;
    border: 1px solid #E0E0E0;
}

.stat-item strong {
    color: var(--elegance-dark);
    font-weight: 600;
}

/* ì†Œê°œ ë¬¸êµ¬ */
#card-bio {
    font-family: 'Noto Sans KR', sans-serif;
    background: #FDF5E6;
    padding: 20px;
    border-radius: 10px;
    font-style: italic;
    font-size: 16px;
    color: #555;
    line-height: 1.6;
    margin-bottom: 25px;
    border-left: 5px solid var(--elegance-pink);
    position: relative;
    text-align: center;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
/* Playfair Display í°íŠ¸ë¥¼ ë”°ì˜´í‘œì— ì ìš©í•˜ì—¬ í¬ì¸íŠ¸ë¥¼ ì¤ë‹ˆë‹¤. */
#card-bio::before {
    content: "â€œ";
    position: absolute;
    top: 5px;
    left: 10px;
    font-family: 'Playfair Display', serif; 
    font-size: 40px;
    color: #DDA0DD;
    font-weight: 900;
}
#card-bio::after {
    content: "â€";
    position: absolute;
    bottom: -5px;
    right: 10px;
    font-family: 'Playfair Display', serif;
    font-size: 40px;
    color: #DDA0DD;
    font-weight: 900;
}


/* ê´€ì‹¬ì‚¬ í•´ì‹œíƒœê·¸ */
#card-hobbies-title {
    font-family: 'Noto Sans KR', sans-serif;
    color: var(--elegance-dark);
    font-size: 16px;
    font-weight: bold;
    margin-bottom: 12px;
    border-top: 1px dashed #E0E0E0;
    padding-top: 20px;
    text-align: center;
}

#card-hobbies-list {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    gap: 8px;
}

.hobby-tag {
    font-family: 'Noto Sans KR', sans-serif;
    background: var(--elegance-pink);
    color: #FFFFFF;
    padding: 7px 14px;
    border-radius: 25px;
    font-size: 14px;
    font-weight: 500;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    transition: background-color 0.2s;
}
.hobby-tag:hover {
    background: #E0B5BD;
}

/* ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ */
#download-button {
    font-family: 'Noto Sans KR', sans-serif;
    width: calc(100% - 2px);
    padding: 15px;
    margin-top: 25px;
    background: var(--elegance-dark);
    color: var(--elegance-gold);
    border: 2px solid var(--elegance-gold);
    border-radius: 10px;
    font-size: 17px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s ease;
    position: absolute;
    bottom: 0;
    left: 0;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}

#download-button:hover {
    background: #7B6D87;
    color: #F0D59D;
    transform: translateY(-2px);
}
</style>
</head>

<body>
<div id="app-container">
    <div id="input-form">
        <h2><span class="logo-icon"></span> ELEGANCE PROFILE</h2>

        <label>1. í”„ë¡œí•„ ì‚¬ì§„ ì—…ë¡œë“œ</label>
        <div id="drop-area">
            <input type="file" id="photo-upload" accept="image/*">
            <div id="drop-area-text">ì‚¬ì§„ì„ **ë“œë˜ê·¸**í•˜ê±°ë‚˜ **í´ë¦­**í•˜ì—¬ ì—…ë¡œë“œí•˜ì„¸ìš”.</div>
        </div>

        <div class="input-group">
            <label>2. ì´ë¦„</label>
            <input type="text" id="input-name" value="ì´ì•„ë¦„">
        </div>
        
        <div class="input-group">
            <label>3. ë‚˜ì´</label>
            <input type="text" id="input-age" value="28">
        </div>

        <div class="input-group">
            <label>4. í‚¤ (cm)</label>
            <input type="text" id="input-height" value="165">
        </div>

        <div class="input-group">
            <label>5. ê°€ìŠ´ ì‚¬ì´ì¦ˆ (cup)</label>
            <input type="text" id="input-cup-size" value="Cì»µ"> 
        </div>

        <div class="input-group">
            <label>6. ëª¸ë¬´ê²Œ (kg)</label>
            <input type="text" id="input-weight" value="50">
        </div>

        <div class="input-group">
            <label>7. ë§¤ë ¥ í¬ì¸íŠ¸ (ììœ ë¡­ê²Œ ì‘ì„±)</label>
            <input type="text" id="input-charm-point" value="ë°ì€ ë¯¸ì†Œ, ì„¬ì„¸í•œ ë§ˆìŒ">
        </div>

        <div class="input-group">
            <label>8. ì§ì—…</label>
            <input type="text" id="input-job" value="ì•„í‹°ìŠ¤íŠ¸">
        </div>

        <div class="input-group">
            <label>9. í•œ ì¤„ ì†Œê°œ</label>
            <textarea id="input-bio" rows="3">ì•„ë¦„ë‹¤ìš´ ìˆœê°„ë“¤ì„ ì†Œì¤‘íˆ ì—¬ê¸°ë©°, ì§„ì •í•œ ì¸ì—°ì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤.</textarea>
        </div>

        <div class="input-group">
            <label>10. ê´€ì‹¬ì‚¬ (ì‰¼í‘œ(,)ë¡œ êµ¬ë¶„)</label>
            <input type="text" id="input-hobbies" value="ì•„íŠ¸ ê°¤ëŸ¬ë¦¬ ë°©ë¬¸, ìš”ê°€, ì™€ì¸ í´ë˜ìŠ¤, í´ë˜ì‹ ìŒì•…">
        </div>
        
        <button id="generate-button"><span class="icon">âœ¨</span> í”„ë¡œí•„ ì¹´ë“œ ìƒì„±/ì—…ë°ì´íŠ¸</button>
    </div>

    <div id="profile-card-wrapper">
        <div id="profile-card-container">
            <div id="card-header">
                <img src="noblesse_logo.png" alt="Noblesse Logo" class="logo-image">
                <div id="card-title">ELEGANCE</div>
            </div>

            <div id="profile-photo">
                ì‚¬ì§„ì„ ì„ íƒí•˜ì—¬ ì—…ë¡œë“œ í•´ì£¼ì„¸ìš”
            </div>

            <div id="card-body">
                <h3 id="output-name-age">ì´ì•„ë¦„, 28</h3>
                
                <div id="card-stats">
                    <span class="stat-item">í‚¤: <strong id="output-height">165cm</strong></span>
                    <span class="stat-item">ì‚¬ì´ì¦ˆ: <strong id="output-cup-size">Cì»µ</strong></span>
                    <span class="stat-item">ëª¸ë¬´ê²Œ: <strong id="output-weight">50kg</strong></span>
                    <span class="stat-item">ë§¤ë ¥ í¬ì¸íŠ¸: <strong id="output-charm-point">ë°ì€ ë¯¸ì†Œ, ì„¬ì„¸í•œ ë§ˆìŒ</strong></span>
                    <span class="stat-item">ì§ì—…: <strong id="output-job">ì•„í‹°ìŠ¤íŠ¸</strong></span>
                </div>

                <div id="card-bio">
                    "ì•„ë¦„ë‹¤ìš´ ìˆœê°„ë“¤ì„ ì†Œì¤‘íˆ ì—¬ê¸°ë©°, ì§„ì •í•œ ì¸ì—°ì„ ê¸°ë‹¤ë¦½ë‹ˆë‹¤."
                </div>

                <div id="card-hobbies-title"># ë‚˜ì˜ ê´€ì‹¬ì‚¬</div>
                <div id="card-hobbies-list">
                    <span class="hobby-tag">ì•„íŠ¸ ê°¤ëŸ¬ë¦¬ ë°©ë¬¸</span>
                    <span class="hobby-tag">ìš”ê°€</span>
                    <span class="hobby-tag">ì™€ì¸ í´ë˜ìŠ¤</span>
                    <span class="hobby-tag">í´ë˜ì‹ ìŒì•…</span>
                </div>
            </div>
        </div>

        <button id="download-button">í”„ë¡œí•„ ì¹´ë“œ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ (.png)</button>
    </div>

</div>

<script>
// ======================================================================================
// â­ï¸ ë“œë˜ê·¸ ì•¤ ë“œë¡­ ë° ì‚¬ì§„ ë¯¸ë¦¬ë³´ê¸° ë¡œì§ (ë³€í™” ì—†ìŒ)
// ======================================================================================
const photoUpload = document.getElementById('photo-upload');
const dropArea = document.getElementById('drop-area');
const profilePhoto = document.getElementById('profile-photo');

// íŒŒì¼ ì²˜ë¦¬ í•¨ìˆ˜
function handleFile(file) {
    if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = (event) => {
            profilePhoto.innerHTML = `<img src="${event.target.result}" alt="í”„ë¡œí•„ ì‚¬ì§„">`;
        };
        reader.readAsDataURL(file);
    }
}

// 1. Input Click ì´ë²¤íŠ¸ ì²˜ë¦¬
photoUpload.addEventListener('change', (e) => {
    handleFile(e.target.files[0]);
});

// 2. Drop Area ì´ë²¤íŠ¸ ì²˜ë¦¬ (ë“œë˜ê·¸ ì•¤ ë“œë¡­)
['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
    dropArea.addEventListener(eventName, preventDefaults, false);
});

function preventDefaults (e) {
    e.preventDefault();
    e.stopPropagation();
}

// í•˜ì´ë¼ì´íŠ¸ íš¨ê³¼
['dragenter', 'dragover'].forEach(eventName => {
    dropArea.addEventListener(eventName, () => dropArea.classList.add('highlight'), false);
});
['dragleave', 'drop'].forEach(eventName => {
    dropArea.addEventListener(eventName, () => dropArea.classList.remove('highlight'), false);
});

// ë“œë¡­ ì²˜ë¦¬
dropArea.addEventListener('drop', (e) => {
    let dt = e.dataTransfer;
    let files = dt.files;
    
    // ë“œë¡­ëœ íŒŒì¼ ì¤‘ ì²« ë²ˆì§¸ ì´ë¯¸ì§€ë¥¼ ì‚¬ìš©
    if (files.length > 0) {
        handleFile(files[0]);
    }
}, false);


// 3. Drop Area í´ë¦­ ì‹œ íŒŒì¼ ì„ íƒì°½ ì—´ê¸°
dropArea.addEventListener('click', () => {
    photoUpload.click();
});


// ======================================================================================
// â­ï¸ ë°ì´í„° ì—…ë°ì´íŠ¸ ë° í”„ë¡œí•„ ì¹´ë“œ ìƒì„± ë¡œì§ (ê°€ìŠ´ ì‚¬ì´ì¦ˆ ë°˜ì˜)
// ======================================================================================
const generateButton = document.getElementById('generate-button');
const downloadButton = document.getElementById('download-button');
const profileCard = document.getElementById('profile-card-container');

function updateProfileCard() {
    const name = document.getElementById('input-name').value;
    const age = document.getElementById('input-age').value;
    const height = document.getElementById('input-height').value;
    const weight = document.getElementById('input-weight').value;
    const cupSize = document.getElementById('input-cup-size').value; 
    const charmPoint = document.getElementById('input-charm-point').value;
    const job = document.getElementById('input-job').value;
    const bio = document.getElementById('input-bio').value;
    
    // ì‰¼í‘œë¡œ êµ¬ë¶„ëœ ê´€ì‹¬ì‚¬ë¥¼ ë°°ì—´ë¡œ ë³€í™˜
    const hobbies = document.getElementById('input-hobbies').value.split(',').map(h => h.trim()).filter(h => h.length > 0);

    // 1. ê¸°ë³¸ ì •ë³´ ì—…ë°ì´íŠ¸
    document.getElementById('output-name-age').textContent = `${name}, ${age}`;
    document.getElementById('output-height').textContent = `${height}cm`;
    document.getElementById('output-weight').textContent = `${weight}kg`;
    // ğŸŒŸ ê°€ìŠ´ ì‚¬ì´ì¦ˆ ì¶œë ¥ ì—…ë°ì´íŠ¸: í…ìŠ¤íŠ¸ ì½˜í…ì¸ ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ì„¤ì •
    document.getElementById('output-cup-size').textContent = cupSize; 
    document.getElementById('output-charm-point').textContent = charmPoint;
    document.getElementById('output-job').textContent = job;
    document.getElementById('card-bio').textContent = `"${bio}"`;

    // 2. ê´€ì‹¬ì‚¬ íƒœê·¸ ì—…ë°ì´íŠ¸
    const hobbiesList = document.getElementById('card-hobbies-list');
    hobbiesList.innerHTML = '';
    hobbies.forEach(hobby => {
        const tag = document.createElement('span');
        tag.className = 'hobby-tag';
        tag.textContent = hobby;
        hobbiesList.appendChild(tag);
    });
}

// ì´ˆê¸° ë¡œë“œ ì‹œ ë° ë²„íŠ¼ í´ë¦­ ì‹œ ì—…ë°ì´íŠ¸
document.addEventListener('DOMContentLoaded', updateProfileCard);
generateButton.addEventListener('click', updateProfileCard);


// ======================================================================================
// â­ï¸ ì´ë¯¸ì§€ ë‹¤ìš´ë¡œë“œ (html2canvas ì‚¬ìš©) - ì ì¬ì  ì§€ì—° ë¬¸ì œ í•´ê²°ì„ ìœ„í•´ ì—…ë°ì´íŠ¸ ë¡œì§ ë³´ê°•
// ======================================================================================
downloadButton.addEventListener('click', () => {
    // 1. ë‹¤ìš´ë¡œë“œ ì „ì— ë§ˆì§€ë§‰ìœ¼ë¡œ ì¹´ë“œ ì—…ë°ì´íŠ¸ë¥¼ ê°•ì œ ì‹¤í–‰
    updateProfileCard(); 
    
    // 2. ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì„ ì ì‹œ ìˆ¨ê¹€ (ì¹´ë“œ ì´ë¯¸ì§€ì— í¬í•¨ë˜ì§€ ì•Šë„ë¡)
    const originalDownloadStyle = downloadButton.style.display;
    downloadButton.style.display = 'none';

    // 3. html2canvasë¡œ ì¹´ë“œ ì˜ì—­ ìº¡ì²˜
    // ìº¡ì²˜ ì „ì— ì•„ì£¼ ì§§ì€ ì§€ì—°(setTimeout)ì„ ì£¼ì–´ DOM ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë  ì‹œê°„ì„ ë²Œì–´ì¤ë‹ˆë‹¤.
    setTimeout(() => {
        html2canvas(profileCard, { 
            backgroundColor: '#FFFFFF',
            scale: 2 // ê³ í™”ì§ˆ ìº¡ì²˜
        }).then(canvas => {
            // 4. ìˆ¨ê²¼ë˜ ë²„íŠ¼ ë‹¤ì‹œ í‘œì‹œ
            downloadButton.style.display = originalDownloadStyle;

            // 5. ìº”ë²„ìŠ¤ë¥¼ ì´ë¯¸ì§€ íŒŒì¼ë¡œ ë³€í™˜í•˜ì—¬ ë‹¤ìš´ë¡œë“œ
            const a = document.createElement('a');
            a.href = canvas.toDataURL('image/png');
            a.download = 'ELEGANCE_í”„ë¡œí•„_ì¹´ë“œ.png';
            a.click();
        });
    }, 50); // 50ms ì§€ì—° ì¶”ê°€: DOM ì—…ë°ì´íŠ¸ê°€ ì™„ë£Œë  ì¶©ë¶„í•œ ì‹œê°„ ì œê³µ
});
</script>
</body>
</html>
